@{
    ViewData["Title"] = "Trang chủ";
}

<style>
    /* Slideshow container */
    .slideshow-container {
        position: relative;
        max-width: 100%;
        margin: auto;
        overflow: hidden; /* Hide overflow to keep everything neat */
    }

    /* Each slide */
    .mySlides {
        width: 100%;
        height: 100vh; /* Full viewport height */
        display: none; /* Hide slides initially */
        display: flex; /* Use Flexbox to center the content */
        justify-content: center; /* Center horizontally */
        align-items: center; /* Center vertically */
    }

        /* Style for images to ensure they scale properly */
        .mySlides img {
            width: 100%;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* Ensure image fits without distortion */
        }

    /* Navigation buttons (left and right) */
    .prev, .next {
        position: absolute;
        top: 50%;
        padding: 16px;
        background-color: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        cursor: pointer;
        font-size: 18px;
        border-radius: 50%;
        z-index: 100;
        transform: translateY(-50%);
    }

    .prev {
        left: 10px;
    }

    .next {
        right: 10px;
    }

    .arrivals_grid_sorting {
        padding: 0;
        list-style: none;
    }

    .grid_sorting_button {
        cursor: pointer;
        padding: 12px 25px;
        margin: 0 10px;
        border: 2px solid transparent; /* Khung viền mặc định */
        border-radius: 30px; /* Bo tròn các góc */
        background-color: #f8f9fa;
        font-weight: 500;
        text-transform: uppercase;
        color: #333;
        transition: all 0.3s ease-in-out; /* Hiệu ứng chuyển động mượt mà */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Đổ bóng nhẹ */
    }

        /* Khi nút được chọn (active) */
        .grid_sorting_button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
        }

        /* Khi hover qua nút */
        .grid_sorting_button:hover {
            background-color: #e2e6ea;
            color: #007bff;
            border-color: #007bff;
            transform: scale(1.05); /* Phóng to nhẹ khi hover */
        }

        /* Khi hover qua nút đã chọn */
        .grid_sorting_button.active:hover {
            background-color: #0056b3;
            box-shadow: 0 4px 12px rgba(0, 86, 179, 0.4);
        }

</style>

<!-- Slideshow Container -->
<div class="slideshow-container">
    <!-- Slide 1 -->
    <div class="mySlides">
        <img src="~/images/khuyenmai.jpg" alt="Slide 1">
    </div>

    <!-- Slide 2 -->
    <div class="mySlides">
        <img src="~/images/slideshow.png" alt="Slide 2">
    </div>

    <!-- Slide 3 -->
    <div class="mySlides">
        <img src="~/images/T3.svg" alt="Slide 3">
    </div>

    <!-- Left navigation button -->
    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>

    <!-- Right navigation button -->
    <a class="next" onclick="plusSlides(1)">&#10095;</a>
</div>




<!-- Features Section -->
<section class="pt-4 pb-2 bg-light">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-4 mb-3">
                <div class="bg-white p-4 rounded shadow-sm">
                    <div class="mb-3">
                        <i class="bi bi-bag-check-fill fs-2 text-primary"></i>
                    </div>
                    <h5 class="fw-bold">CAM KẾT CHÍNH HÃNG</h5>
                    <p class="text-muted mb-0">100% Authentic</p>
                    <small>Cam kết sản phẩm chính hãng từ Châu Âu, Châu Mỹ...</small>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="bg-white p-4 rounded shadow-sm">
                    <div class="mb-3">
                        <i class="bi bi-truck fs-2 text-primary"></i>
                    </div>
                    <h5 class="fw-bold">GIAO HÀNG HỎA TỐC</h5>
                    <p class="text-muted mb-0">Express Delivery</p>
                    <small>SHIP hỏa tốc 1h nhận hàng trong nội thành HCM</small>
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="bg-white p-4 rounded shadow-sm">
                    <div class="mb-3">
                        <i class="bi bi-headset fs-2 text-primary"></i>
                    </div>
                    <h5 class="fw-bold">HỖ TRỢ 24/24</h5>
                    <p class="text-muted mb-0">Supporting 24/24</p>
                    <small>Gọi ngay <a href="tel:0909300746">0909300746</a></small>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Sản phẩm -->
<section class="pt-4 pb-4" id="SanPhamMoi">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="fw-bold mb-0">Sản phẩm mới</h3>
            <a href="/Home/trangsanpham" class="btn btn-outline-primary btn-sm">Xem tất cả</a>
        </div>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4" id="ContainSP">
            <!-- Sản phẩm 1 -->
           @*  <div class="col">
                <div class="card h-100">
                    <a href="https://kingshoes.vn/air-force-1-cw2288-111.html">
                        <img src="https://kingshoes.vn/data/upload/thumb/sneaker-315122-111-air-force-1-07-nike-kingshoesvn-tphcm-tanbinh-17-logo-1551924204-jpg/500_SNEAKER-315122-111-AIR-FORCE-1-07-NIKE-KINGSHOES.VN-TPHCM-TANBINH-17-logo-1551924204-.jpg.webp"
                             class="card-img-top" alt="AIR FORCE 1">
                    </a>
                    <div class="card-body">
                        <a href="https://kingshoes.vn/air-force-1-cw2288-111.html" style="text-decoration:none">
                            <h5 class="card-title"></h5>
                        </a>
                        <div>
                            <span class="text-warning"></span>
                        </div>
                        <p class="text-danger"></p>

                    </div>
                </div>
            </div> *@

            <!-- Thêm các sản phẩm khác tương tự -->
        </div>
    </div>
</section>

<!-- Sản phẩm bán chạy -->
<section class="pt-4 pb-4" id="SanPhamBanChay">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="fw-bold mb-0">Sản phẩm bán chạy</h3>
            <a href="/Home/trangsanpham" class="btn btn-outline-primary btn-sm">Xem tất cả</a>
        </div>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4" id="ContainSPBC">
            <!-- Sản phẩm 1 -->
            @* <div class="col">
                <div class="card h-100">
                    <a href="https://kingshoes.vn/air-force-1-cw2288-111.html">
                        <img src="https://kingshoes.vn/data/upload/thumb/sneaker-315122-111-air-force-1-07-nike-kingshoesvn-tphcm-tanbinh-17-logo-1551924204-jpg/500_SNEAKER-315122-111-AIR-FORCE-1-07-NIKE-KINGSHOES.VN-TPHCM-TANBINH-17-logo-1551924204-.jpg.webp"
                             class="card-img-top" alt="AIR FORCE 1">
                    </a>
                    <div class="card-body">
                        <a href="https://kingshoes.vn/air-force-1-cw2288-111.html" style="text-decoration:none">
                            <h5 class="card-title">AIR FORCE 1</h5>
                        </a>
                        <div>
                            <span class="text-warning">★★★★☆</span>
                        </div>
                        <p class="text-danger">3,200,000 đ</p>

                    </div>
                </div>
            </div> *@

            <!-- Thêm các sản phẩm khác tương tự -->
        </div>
    </div>
</section>
@* Danh mục trang chu *@
<div class="new_arrivals">
    <div class="container">
        <div class="row align-items-center">
            <div class="col text-center">
                <div class="new_arrivals_sorting" >
                    <ul class="arrivals_grid_sorting clearfix button-group filters-button-group d-flex justify-content-center" id="ListCategory">
                       
                    </ul>
                </div>
            </div>
        </div>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4" id="ListProd">
            
        </div>
    </div>
</div>



<script>
    let slideIndex = 0; // Current slide index

    // Show the slides
    function showSlides() {
        let slides = document.getElementsByClassName("mySlides");

        if (slides.length > 0) {
            // Hide all slides
            for (let i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }

            // Display the current slide
            slides[slideIndex].style.display = "block";
        }
    }

    // Function to navigate between slides
    function plusSlides(n) {
        slideIndex += n;

        let slides = document.getElementsByClassName("mySlides");

        // Loop through the slides
        if (slideIndex >= slides.length) {
            slideIndex = 0; // Go back to the first slide
        }
        if (slideIndex < 0) {
            slideIndex = slides.length - 1; // Go to the last slide
        }

        showSlides(); // Show the updated slide
    }

    // Display the first slide when the page loads
    window.onload = function () {
        showSlides();
    }

    // Khi người dùng nhấn vào một danh mục
    document.querySelectorAll('.grid_sorting_button').forEach(function (button) {
        button.addEventListener('click', function () {
            // Loại bỏ lớp 'active' khỏi tất cả các nút
            document.querySelectorAll('.grid_sorting_button').forEach(function (button) {
                button.classList.remove('active');
            });

            // Thêm lớp 'active' cho nút được nhấn
            button.classList.add('active');

            // Lấy danh mục mà người dùng chọn
            var category = button.getAttribute('data-category');

            // Hiển thị các sản phẩm theo danh mục đã chọn
            var products = document.querySelectorAll('.product-item');
            products.forEach(function (product) {
                if (category === 'all' || product.classList.contains(category)) {
                    product.style.display = 'block'; // Hiển thị sản phẩm
                } else {
                    product.style.display = 'none'; // Ẩn sản phẩm
                }
            });
        });
    });

</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 
<script>
    $(document).ready(function () {
        //Sản phẩm mới
        $.ajax({
            url: 'https://localhost:7103/api/homeapi/getproducts',
            type:'GET',
            success:function(res){
                var contain = $('#ContainSP');
                res.products.forEach(function (product) {
                    var rating = '★'.repeat(Math.floor(product.ratingAvg)) + '☆'.repeat(5 - Math.floor((product.ratingAvg)));
                    var html = `
                            <div class="col">
                    <div class="card h-100">
                        <a href="/Home/TrangChiTietSP/${product.productId}">

                            <img src="/images/${product.image}"
                                 class="card-img-top" alt="AIR FORCE 1">
                        </a>
                        <div class="card-body">
                            <a href="https://kingshoes.vn/${product.slug}" style="text-decoration:none">
                                <h5 class="card-title">${product.name}</h5>
                            </a>
                            <div>
                                <span class="text-warning">${rating}</span>
                            </div>
                            <p class="text-danger">${product.price.toLocaleString()}đ</p>

                        </div>
                    </div>
                </div>
                    `;
                    contain.append(html);
                });
            }
        });

        //Sản phẩm bán chạy
        $.ajax({
            url: 'https://localhost:7103/api/homeapi/getproducts',
            type: 'GET',
            success: function (res) {
                var contain = $('#ContainSPBC');
                res.bestSeller.forEach(function (prod) {
                    var rating = '★'.repeat(Math.floor(prod.product.ratingAvg)) + '☆'.repeat(5 - Math.floor((prod.product.ratingAvg)));
                    var html = `
                                <div class="col">
                        <div class="card h-100">
                            <a href="https://kingshoes.vn/air-force-1-cw2288-111.html">
                                    <img src="/images/${prod.product.image}"
                                     class="card-img-top" alt="AIR FORCE 1">
                            </a>
                            <div class="card-body">
                                    <a href="https://kingshoes.vn/${prod.product.slug}" style="text-decoration:none">
                                    <h5 class="card-title">${prod.product.name}</h5>
                                </a>
                                <div>
                                    <span class="text-warning">${rating}</span>
                                </div>
                                        <p class="text-danger">${prod.product.price.toLocaleString()}đ</p>

                            </div>
                        </div>
                    </div>
                        `;
                    contain.append(html);
                });
            }
        });

        //Lấy categories danh mục nhỏ
        $.ajax({
            url: 'https://localhost:7103/api/homeapi/GetCategories',
            type: 'GET',
            success: function (res) {
                var html='';
                res.forEach(function (cate,index) {
                    html += `
                           <li class="grid_sorting_button button d-flex flex-column justify-content-center align-items-center  ${index == 0 ? 'active' : ''}"
                           data-category="${cate.categoryId}"
                      >${cate.name}</li>
                    `;
                });
                $('#ListCategory').on('click', '.grid_sorting_button', function () {
                    var categoryId = $(this).data('category');
                    loadProductByCategory(categoryId);
                    //cập nhật nút được chọn
                    $('#ListCategory li').removeClass('active');
                    $(this).addClass('active');
                });
                $('#ListCategory').append(html);
                var defaultChoose = res[0].categoryId
                loadProductByCategory(defaultChoose);

            }
        });

        //Hiện sản phẩm theo danh mục nhỏ
        function loadProductByCategory(categoryId)
        {
            $.ajax({
                url: `https://localhost:7103/api/homeapi/GetProductsByCategory/${categoryId}`,
                type:'GET',
                success:function(res){
                    $('#ListProd').empty();
                    if (res.length === 0)
                    {
                        $('#ListProd').html(`<p class="text-center" style="width: 100%; margin-top: 20px;">Không tìm thấy sản phẩm nào.</p>`);
                    }
                    else{
                        var html;
                        res.forEach(function (prod) {
                            var rating = '★'.repeat(Math.floor(prod.ratingAvg)) + '☆'.repeat(5 - (Math.floor(prod.ratingAvg)));
                            html = `
                                         <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                                <div class="card h-100 shadow-sm border-light">
                                    <a href="https://kingshoes.vn/air-force-1-cw2288-111.html">
                                            <img src="/images/${prod.image}"
                                             class="card-img-top" alt="${prod.name}">
                                    </a>
                                    <div class="card-body">
                                        <a href="https://kingshoes.vn/air-force-1-cw2288-111.html" class="text-decoration-none">
                                            <h5 class="card-title">${prod.name}</h5>
                                        </a>
                                        <div>
                                            <span class="text-warning">${rating}</span>
                                        </div>
                                        <p class="text-danger">${prod.price.toLocaleString()}đ</p>
                                    </div>
                                </div>
                            </div>
                            `;
                            $('#ListProd').append(html);
                        });
                    }
                }
            });
        }
    });
</script>
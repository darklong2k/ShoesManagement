



<section class="pt-4 pb-4">
    <div class="container">
        <!-- Phần Giới Thiệu Công Ty -->
        <div class="row">
            <div class="col-12" id="Blog">
                <h1 class="text-center mb-4">Giới Thiệu Công Ty</h1>
                <p class="lead">Chúng tôi là công ty chuyên cung cấp sản phẩm chất lượng cao trong lĩnh vực ...</p>
            </div>
        </div>

        <!-- Phần Danh Sách Bài Viết Blog -->
        <div class="row mt-5">
            <div class="col-12">
                <h1 class="text-center mb-4">Danh Sách Bài Viết Blog</h1>

                <div class="list-group" id="ListBlogs">
                   
                    
                    <!-- Thêm các bài viết khác ở đây -->
                </div>

                <!-- Phân trang -->
                <!-- Phân trang -->
                <nav class="mt-4">
                    <ul class="pagination justify-content-center" id="PhanTrang">
                        
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</section>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    function truncateContent(content)
    {
        if(content.length > 100)
        {
            return content.substring(0, 100) + '...';
        }
        return content;
    }
    $(document).ready(function () {
        let page = 1;
        function loadBlogs(page){
            $.ajax({
                url: `https://localhost:7103/api/homeapi/GetBlogs?page=${page}`,
                type: 'GET',
                success: function (res) {
                    var html = '';
                    res.blogs.forEach(function (blo) {
                        html += `
                                 <a href="" class="list-group-item list-group-item-action">
                                    <h5 class="mb-1">${blo.blogTitle}</h5>
                                        <p class="mb-1">${truncateContent(blo.blogContent)}</p >
                                    <small class="text-muted">Ngày đăng: ${blo.createdDate}</small>
                            </a>
                        `;
                    });
                    $('#ListBlogs').html(html);

                    $('#PhanTrang').empty();
                    for (let i = 1; i <= res.totalPage; i++) {
                        const activeClass = i == page ? 'active' : '';
                        $('#PhanTrang').append(`
                                    <li class="page-item ${activeClass}">
                                        <a class ="page-link" href="#" data-page="${i}">${i}</a>
                                    </li>
                                `);
                    }

                    $(document).on('click', '.page-link', function (e) {
                        e.preventDefault();
                        const page = $(this).data('page');
                        if (page) {
                            currentPage = page;
                            loadBlogs(currentPage);
                        }
                    });
                }
            });
        }
        loadBlogs(page);        
    });
</script>


